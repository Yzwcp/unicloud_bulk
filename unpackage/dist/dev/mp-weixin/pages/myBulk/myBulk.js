(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/myBulk/myBulk"],{165:function(e,n,t){"use strict";(function(e){t(5);r(t(3));var n=r(t(166));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=t,e(n.default)}).call(this,t(1)["createPage"])},166:function(e,n,t){"use strict";t.r(n);var r=t(167),a=t(169);for(var i in a)"default"!==i&&function(e){t.d(n,e,(function(){return a[e]}))}(i);t(171);var o,u=t(11),s=Object(u["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,"3ba3b806",null,!1,r["components"],o);s.options.__file="pages/myBulk/myBulk.vue",n["default"]=s.exports},167:function(e,n,t){"use strict";t.r(n);var r=t(168);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},168:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return o})),t.d(n,"recyclableRender",(function(){return i})),t.d(n,"components",(function(){return r}));try{r={uCountDown:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-count-down/u-count-down")]).then(t.bind(null,239))},uModal:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-modal/u-modal")]).then(t.bind(null,273))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var e=this,n=e.$createElement,t=(e._self._c,e.group_adds.length>0?e.__map(e.group_adds,(function(n,t){var r=e.__get_orig(n),a=e.filterDate(n.create_date);return{$orig:r,m0:a}})):null);e.$mp.data=Object.assign({},{$root:{l0:t}})},i=!1,o=[];a._withStripped=!0},169:function(e,n,t){"use strict";t.r(n);var r=t(170),a=t.n(r);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=a.a},170:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t(14));function a(e){return e&&e.__esModule?e:{default:e}}function i(e,n,t,r,a,i,o){try{var u=e[i](o),s=u.value}catch(d){return void t(d)}u.done?n(s):Promise.resolve(s).then(r,a)}function o(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function u(e){i(o,r,a,u,s,"next",e)}function s(e){i(o,r,a,u,s,"throw",e)}u(void 0)}))}}var u={data:function(){return{allResult:{},bannerList:[],baseImgUrl:getApp().globalData.baseImageUrl,headerImgUrl:"",isEnding:!1,timeData:{},time:9999999999,invited:!1,group_adds:[],bulkData:{},isOrderFinish:!1,addrShow:!1,addrString:"",statusObj:{1:"正在进行",2:"待发货","-1":"异常",3:"已发货",4:"签收"},loading:!0,btnloading:!1}},onShareAppMessage:function(e){var n=this,t={title:"就差一人",path:"/pages/myBulk/myBulk?_id=".concat(n.allResult._id,"&creator=",1),imageUrl:""};return"button"==e.from&&console.log("取消"),t},computed:{needsPeople:function(){var e=this.bulkData.groupsize-this.group_adds.length;return e>=0?e:0}},onLoad:function(e){var n=e._id;e.creator&&(this.invited=!0),this.initData({order_id:n},"detail")},methods:{go:function(){e.switchTab({url:"/pages/index/index"})},setClipboardData:function(){var n=this;e.setClipboardData({data:n.allResult.way_number,success:function(){}})},filterDate:function(e){if(e){var n=new Date(e).getFullYear(),t=new Date(e).getMonth()+1,r=new Date(e).getDate(),a=new Date(e).getHours();a=a<10?"0"+a:a,i=i<10?"0"+i:i;var i=new Date(e).getMinutes();return n+"."+t+"."+r+" "+a+":"+i}return"-"},handleHelp:function(){var e=this;return o(r.default.mark((function n(){var t,a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.btnloading=!0,n.next=3,e.$store.dispatch("login");case 3:if(t=n.sent,t){n.next=6;break}return n.abrupt("return",e.btnloading=!1);case 6:a={order_id:e.allResult._id,bulk_id:e.bulkData._id,user_id:e.allResult.user_id},e.$api.bulkordercenter(a,"groupadd").then((function(n){n.success?(e.$showToast("助力成功"),e.initData({order_id:e.allResult._id},"detail")):e.$showToast("不能给自己助力哦！")})).finally((function(){e.btnloading=!1}));case 8:case"end":return n.stop()}}),n)})))()},initData:function(n,t){var a=this;return o(r.default.mark((function i(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.loading=!0,a.$showLoading(),a.$api.bulkordercenter(n,t).then((function(e){e.success&&(a.allResult=e.data,a.bulkData=e.data.bulk[0],a.bannerList=e.data.bulk[0].content_img[0],a.group_adds=e.data.group,a.time=Number(a.bulkData.endtime)-(new Date).getTime()>0?Number(a.bulkData.endtime)-(new Date).getTime():0,a.orderFinish())})).finally((function(){a.loading=!1,e.hideLoading()}));case 3:case"end":return r.stop()}}),i)})))()},orderFinish:function(){this.needsPeople<1?this.isOrderFinish=!0:this.isOrderFinish=!1},setAddr:function(){var n=this;return o(r.default.mark((function t(){var a,i;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n,t.next=3,n.$store.dispatch("login");case 3:if(i=t.sent,i){t.next=6;break}return t.abrupt("return");case 6:setTimeout((function(){e.chooseAddress({success:function(e){a.addrShow=!0,a.addrString=e}})}),800);case 7:case"end":return t.stop()}}),t)})))()},addrcancel:function(){this.addrShow=!1,this.addrString={}},addrconfirm:function(){var n=this;this.$showLoading(),this.$api.bulkordercenter({order_id:this.allResult._id,address:this.addrString,bulk_id:this.bulkData._id},"modify").then((function(e){e.success&&n.initData({order_id:n.allResult._id},"detail")})).finally((function(t){e.hideLoading(),n.addrShow=!1}))},onChange:function(e){this.timeData=e},finish:function(){e.showToast({title:"活动结束了，请关注其他活动",icon:"none"})}}};n.default=u}).call(this,t(1)["default"])},171:function(e,n,t){"use strict";t.r(n);var r=t(172),a=t.n(r);for(var i in r)"default"!==i&&function(e){t.d(n,e,(function(){return r[e]}))}(i);n["default"]=a.a},172:function(e,n,t){}},[[165,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/myBulk/myBulk.js.map